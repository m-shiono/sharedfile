<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>テキスト比較ツール</title>
    <style>
        .diff {
            background-color: #FFDDDD; 
        }
    </style>
</head>
<body>
    <h1>テキスト比較ツール</h1>
    <hr>
    <h2>説明</h2>
    このツールはHTMLとJavascriptのみで構成されており、比較した内容がどこかに保存されることはありません。

    <h3>使い方</h3>
    「原本（比較元）の情報」と「設定済み（比較先）の情報」にDiffしたいテキストを貼り付けて、比較ボタンをクリックしてください。
    テキストが比較され、差分がある行に色がつきどのような差分があるか表示されます。

    <h3>制限事項</h3>
    簡易Diffツールのため、同じ内容が別の行に書かれているような行をまたいだ比較はできません。

    <table>
        <tr>
            <td>
                <div>
                    <h3>原本（比較元）の情報</h3>
                    ※元となる設定を貼り付けてください
                    <textarea id="diff_source" rows="20" cols="120"></textarea>
                </div>
             </td>
             <td>
                <div>
                    <h3>設定済み（比較先）の情報</h3>
                    ※設定済みの設定を貼り付けてください
                    <textarea id="diff_target" rows="20" cols="120"></textarea>
                </div>
             </td>
        </tr>
    </table>

    <button onclick="compareTexts()">比較</button>
    <button onclick="resetTexts()">初期化</button>

    <div>
        <h2>比較結果の表示</h2>
        <pre id="diff-result"></pre>
    </div>

    <script>
        function compareTexts() {
            var diff_source = document.getElementById('diff_source').value.split('\n');
            var diff_target = document.getElementById('diff_target').value.split('\n');
            var resultDiv = document.getElementById('diff-result');
            resultDiv.innerHTML = '';

            for (var i = 0; i < Math.max(diff_source.length, diff_target.length); i++) {
                var line1 = diff_source[i] || '';
                var line2 = diff_target[i] || '';
                
                if (line1 !== line2) {
                    resultDiv.innerHTML += '<span class="diff">【' + line2 + '】 ← 【' + line1 + '】</span>\n';
                } else {
                    resultDiv.innerHTML += line2 + '\n';
                }
            }
        }
        function resetTexts() {
            document.getElementById('diff_source').value = '';
            document.getElementById('diff_target').value = '';
            document.getElementById('diff-result').innerHTML = '';
        }
    </script>
</body>
</html>
