<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ログパーサー・フィルタリングツール - 便利ツール＆ユーティリティ</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <h1>ログパーサー・フィルタリングツール</h1>
        <p>各種ログデータを解析し、フィルタリングや統計情報の表示を行います。</p>
    </header>
    <nav>
        <ul>
            <li><a href="../index.html">ホームに戻る</a></li>
            <li><a href="../regex-tester/index.html">正規表現テスター</a></li>
        </ul>
    </nav>
    
    <main>
        <div class="tool-card">
            <div class="tool-container">
                <div class="log-input-section">
                    <h2>ログデータ入力</h2>
                    <div class="input-controls">
                        <label>
                            <input type="radio" name="inputMethod" value="text" checked>
                            テキスト入力
                        </label>
                        <label>
                            <input type="radio" name="inputMethod" value="file">
                            ファイル読み込み
                        </label>
                    </div>
                    
                    <div class="log-format-section">
                        <h3>ログフォーマット</h3>
                        <div class="format-buttons">
                            <button data-format="apache-access">Apache アクセスログ</button>
                            <button data-format="nginx-access">Nginx アクセスログ</button>
                            <button data-format="apache-error">Apache エラーログ</button>
                            <button data-format="nginx-error">Nginx エラーログ</button>
                            <button data-format="custom">カスタム</button>
                        </div>
                    </div>
                    
                    <div class="input-area">
                        <textarea id="logInput" placeholder="ログデータを入力してください..."></textarea>
                        <input type="file" id="logFile" accept=".log,.txt" style="display: none;">
                        <button id="loadFileBtn" style="display: none;">ファイルを選択</button>
                    </div>
                    
                    <div class="parse-controls">
                        <button id="parseBtn">ログを解析</button>
                        <button id="clearBtn">クリア</button>
                    </div>
                </div>
                
                <div class="filter-section">
                    <h2>フィルタリング・抽出</h2>
                    <div class="filter-controls">
                        <div class="field-filter">
                            <label>フィールド選択:</label>
                            <select id="fieldSelect">
                                <option value="all">全体</option>
                            </select>
                        </div>
                        
                        <div class="regex-filter">
                            <label>正規表現フィルタ:</label>
                            <div class="regex-input-wrapper">
                                <span class="regex-delimiter">/</span>
                                <input type="text" id="filterRegex" placeholder="フィルタする正規表現">
                                <span class="regex-delimiter">/</span>
                                <div class="flags-section">
                                    <label class="flag-label"><input type="checkbox" id="flagGlobal" value="g"><span>g</span></label>
                                    <label class="flag-label"><input type="checkbox" id="flagIgnoreCase" value="i"><span>i</span></label>
                                    <label class="flag-label"><input type="checkbox" id="flagMultiline" value="m"><span>m</span></label>
                                </div>
                            </div>
                        </div>
                        
                        <div class="quick-filters">
                            <h3>クイックフィルタ</h3>
                            <div class="quick-filter-buttons">
                                <button data-filter="error">エラー（4xx, 5xx）</button>
                                <button data-filter="success">成功（2xx）</button>
                                <button data-filter="ip">IPアドレス</button>
                                <button data-filter="suspicious">疑わしい活動</button>
                                <button data-filter="today">今日</button>
                            </div>
                        </div>
                        
                        <button id="applyFilterBtn">フィルタ適用</button>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="tool-card">
            <h2>解析結果</h2>
            <div class="results-summary" id="resultsSummary"></div>
            <div class="results-tabs">
                <button class="tab-button active" data-tab="parsed">解析済みログ</button>
                <button class="tab-button" data-tab="stats">統計情報</button>
                <button class="tab-button" data-tab="filtered">フィルタ結果</button>
            </div>
            
            <div class="tab-content active" id="parsed-tab">
                <div class="parsed-logs" id="parsedLogs"></div>
            </div>
            
            <div class="tab-content" id="stats-tab">
                <div class="stats-container" id="statsContainer"></div>
            </div>
            
            <div class="tab-content" id="filtered-tab">
                <div class="filtered-logs" id="filteredLogs"></div>
            </div>
        </div>
        
        <div class="tool-card">
            <h2>エクスポート</h2>
            <div class="export-controls">
                <select id="exportFormat">
                    <option value="json">JSON</option>
                    <option value="csv">CSV</option>
                    <option value="txt">テキスト</option>
                </select>
                <button id="exportBtn">エクスポート</button>
            </div>
        </div>
        
        <div class="tool-card">
            <h2>正規表現テスター連携</h2>
            <p>複雑な正規表現パターンをテストしたい場合は、<a href="../regex-tester/index.html" target="_blank">正規表現テスター</a>をご利用ください。</p>
            <div class="integration-controls">
                <button id="sendToRegexTester">正規表現テスターで開く</button>
                <button id="importFromRegexTester">正規表現テスターから取り込み</button>
            </div>
        </div>
    </main>
    
    <footer>
        <p>&copy; 2024 m-shiono personal project</p>
    </footer>
    
    <script src="script.js"></script>
</body>
</html>
